<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>CENADURÍA LAS COMADRES</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 720px;
      margin: auto;
      padding: 20px;
      background-color: #fdf4ec;
      border-radius: 12px;
      box-shadow: 0 0 5px rgba(211, 35, 35, 0.2);
      margin-top: 30px;
    }
    h2 {
      text-align: center;
    }
    label {
      display: block;
      margin: 10px 0 5px;
      font-size: 22px;
      text-align: center;
    }
    input[type="number"] {
      width: 30%;
      margin: 0 auto;
      display: block;
      font-size: 20px;
      text-align: center;
    }
    button {
      margin-top: 10px;
      width: 100%;
      padding: 10px;
      font-size: 16px;
      background-color: #0445f7;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    h3 {
      text-align: center;
      margin-top: 20px;
      font-size: 24px;
    }
    pre {
      background-color: #fff;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 10px;
      white-space: pre-wrap;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h2>Ticket CENADURÍA LAS COMADRES</h2>

  <label for="pozole_gde">Pozole Grande</label>
  <input type="number" id="pozole_gde" placeholder="">

  <label for="pozole_ltr">Pozole Litro</label>
  <input type="number" id="pozole_ltr" placeholder="">

  <label for="pozole_chico">Pozole Chico</label>
  <input type="number" id="pozole_chico" placeholder="">

  <label for="quesa_con">Quesadilla con carne</label>
  <input type="number" id="quesa_con" placeholder="">

  <label for="quesa_sin">Quesadilla sin carne</label>
  <input type="number" id="quesa_sin" placeholder="">

  <label for="sopes_con">Sopes con carne</label>
  <input type="number" id="sopes_con" placeholder="">

  <label for="sopes_sin">Sopes sin carne</label>
  <input type="number" id="sopes_sin" placeholder="">

  <label for="tacos_dor_con">Tacos dorados con carne</label>
  <input type="number" id="tacos_dor_con" placeholder="">

  <label for="tacos_dor_sin">Tacos dorados sin carne</label>
  <input type="number" id="tacos_dor_sin" placeholder="">

  <label for="aguas">Aguas frescas</label>
  <input type="number" id="aguas" placeholder="">

  <label for="soda">Refresco</label>
  <input type="number" id="soda" placeholder="">

  <label for="gela">Gelatina</label>
  <input type="number" id="gela" placeholder="">

  <button onclick="calcular()">Calcular total</button>
  <button onclick="limpiarCampos()">Limpiar</button>
  <button onclick="guardarTicket()">Guardar ticket</button>

  <h3>Total: $<span id="total">0.00</span> MXN</h3>
  <pre id="ticket"></pre>

  <script>
    function generarFolio() {
      const now = new Date();
      return 'F' + now.getFullYear() +
            (now.getMonth() + 1).toString().padStart(2, '0') +
            now.getDate().toString().padStart(2, '0') +
            now.getHours().toString().padStart(2, '0') +
            now.getMinutes().toString().padStart(2, '0') +
            now.getSeconds().toString().padStart(2, '0');
    }

    let ultimoTicket = '';

    function calcular() {
      const productos = [
        { nombre: "Pozole Gde", precio: 70, cantidad: parseInt(document.getElementById("pozole_gde").value) || 0 },
        { nombre: "Pozole litro", precio: 70, cantidad: parseInt(document.getElementById("pozole_ltr").value) || 0 },
        { nombre: "Pozole Chico", precio: 50, cantidad: parseInt(document.getElementById("pozole_chico").value) || 0 },
        { nombre: "Quesadilla con carne", precio: 40, cantidad: parseInt(document.getElementById("quesa_con").value) || 0 },
        { nombre: "Quesadilla sin carne", precio: 30, cantidad: parseInt(document.getElementById("quesa_sin").value) || 0 },
        { nombre: "Sopes con carne", precio: 20, cantidad: parseInt(document.getElementById("sopes_con").value) || 0 },
        { nombre: "Sopes sin carne", precio: 15, cantidad: parseInt(document.getElementById("sopes_sin").value) || 0 },
        { nombre: "Tacos dorados con carne", precio: 15, cantidad: parseInt(document.getElementById("tacos_dor_con").value) || 0 },
        { nombre: "Tacos dorados sin carne", precio: 12, cantidad: parseInt(document.getElementById("tacos_dor_sin").value) || 0 },
        { nombre: "Aguas frescas", precio: 15, cantidad: parseInt(document.getElementById("aguas").value) || 0 },
        { nombre: "Refresco", precio: 25, cantidad: parseInt(document.getElementById("soda").value) || 0 },
        { nombre: "Gelatina", precio: 10, cantidad: parseInt(document.getElementById("gela").value) || 0 },
      ];

      let total = 0;
      const folio = generarFolio();
      const fecha = new Date().toLocaleString('es-MX');

      let ticket = ===== TICKET DE CENADURÍA =====\nFolio: ${folio}\nFecha: ${fecha}\n\n;

      productos.forEach(p => {
        if (p.cantidad > 0) {
          let subtotal = p.precio * p.cantidad;
          total += subtotal;
          ticket += ${p.nombre} (${p.cantidad} x $${p.precio}): $${subtotal}\n;
        }
      });

      ticket += "------------------------------\n";
      ticket += TOTAL: $${total.toFixed(2)} MXN\n;
      ticket += "Gracias por su compra.";

      document.getElementById("total").textContent = total.toFixed(2);
      document.getElementById("ticket").textContent = ticket;
      ultimoTicket = ticket;
    }

    function guardarTicket() {
      if (!ultimoTicket) {
        alert("Primero genera un ticket.");
        return;
      }
      const blob = new Blob([ultimoTicket], { type: "text/plain;charset=utf-8" });
      const url = URL.createObjectURL(blob);
      const link = document.createElement("a");
      link.href = url;
      const folio = generarFolio();
      link.download = ticket_${folio}.txt;
      link.click();
      URL.revokeObjectURL(url);
    }

    function limpiarCampos() {
      const inputs = document.querySelectorAll('input[type="number"]');
      inputs.forEach(input => input.value = '');
      document.getElementById("total").textContent = "0.00";
      document.getElementById("ticket").textContent = "";
      ultimoTicket = "";

      const campo = document.getElementById("pozole_gde");
      if (campo) campo.focus();
    }
  </script>
</body>
</html>
